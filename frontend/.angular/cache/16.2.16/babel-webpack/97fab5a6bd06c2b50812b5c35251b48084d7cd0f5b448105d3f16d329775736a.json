{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./../services/user.service\";\nimport * as i2 from \"././../services/auth.service\";\nimport * as i3 from \"@angular/common\";\nfunction ProfileComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 2)(1, \"h2\");\n    i0.ÉµÉµtext(2, \"\\uD83D\\uDC64 Mon Profil\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 3)(4, \"p\")(5, \"strong\");\n    i0.ÉµÉµtext(6, \"Nom :\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(7);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(8, \"p\")(9, \"strong\");\n    i0.ÉµÉµtext(10, \"Pr\\u00E9nom :\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(11);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(12, \"p\")(13, \"strong\");\n    i0.ÉµÉµtext(14, \"Email :\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(15);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(16, \"p\")(17, \"strong\");\n    i0.ÉµÉµtext(18, \"R\\u00F4le :\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(19);\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(7);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r0.currentUser.nom, \"\");\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r0.currentUser.prenom, \"\");\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r0.currentUser.email, \"\");\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r0.currentUser.role || \"Utilisateur\", \"\");\n  }\n}\nfunction ProfileComponent_ng_template_1_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\");\n    i0.ÉµÉµtext(1, \"Chargement du profil...\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ProfileComponent_ng_template_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 6);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r4.errorMessage, \" \");\n  }\n}\nfunction ProfileComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµtemplate(0, ProfileComponent_ng_template_1_div_0_Template, 2, 0, \"div\", 4);\n    i0.ÉµÉµtemplate(1, ProfileComponent_ng_template_1_div_1_Template, 2, 1, \"div\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.loading);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", !ctx_r2.loading && ctx_r2.errorMessage);\n  }\n}\nexport class ProfileComponent {\n  constructor(userService, authService) {\n    this.userService = userService;\n    this.authService = authService;\n    this.loading = true;\n    this.errorMessage = '';\n  }\n  ngOnInit() {\n    // âœ… rÃ©cupÃ©rer l'ID ou l'email de lâ€™utilisateur connectÃ© depuis AuthService\n    const userId = this.authService.ge();\n    // ou bien : const email = this.authService.getUserEmail();\n    if (userId) {\n      this.userService.getUserById(userId).subscribe({\n        next: user => {\n          this.currentUser = user;\n          this.loading = false;\n        },\n        error: err => {\n          console.error(err);\n          this.errorMessage = \"Impossible de charger le profil.\";\n          this.loading = false;\n        }\n      });\n    } else {\n      this.errorMessage = \"Utilisateur non connectÃ©.\";\n      this.loading = false;\n    }\n  }\n  static {\n    this.Éµfac = function ProfileComponent_Factory(t) {\n      return new (t || ProfileComponent)(i0.ÉµÉµdirectiveInject(i1.UserService), i0.ÉµÉµdirectiveInject(i2.AuthService));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: ProfileComponent,\n      selectors: [[\"app-profile\"]],\n      decls: 3,\n      vars: 2,\n      consts: [[\"class\", \"profile-container\", 4, \"ngIf\", \"ngIfElse\"], [\"loadingOrError\", \"\"], [1, \"profile-container\"], [1, \"profile-card\"], [4, \"ngIf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"error-message\"]],\n      template: function ProfileComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµtemplate(0, ProfileComponent_div_0_Template, 20, 4, \"div\", 0);\n          i0.ÉµÉµtemplate(1, ProfileComponent_ng_template_1_Template, 2, 2, \"ng-template\", null, 1, i0.ÉµÉµtemplateRefExtractor);\n        }\n        if (rf & 2) {\n          const _r1 = i0.ÉµÉµreference(2);\n          i0.ÉµÉµproperty(\"ngIf\", !ctx.loading && ctx.currentUser)(\"ngIfElse\", _r1);\n        }\n      },\n      dependencies: [i3.NgIf],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ÉµÉµelementStart","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµadvance","ÉµÉµtextInterpolate1","ctx_r0","currentUser","nom","prenom","email","role","ctx_r4","errorMessage","ÉµÉµtemplate","ProfileComponent_ng_template_1_div_0_Template","ProfileComponent_ng_template_1_div_1_Template","ÉµÉµproperty","ctx_r2","loading","ProfileComponent","constructor","userService","authService","ngOnInit","userId","ge","getUserById","subscribe","next","user","error","err","console","ÉµÉµdirectiveInject","i1","UserService","i2","AuthService","selectors","decls","vars","consts","template","ProfileComponent_Template","rf","ctx","ProfileComponent_div_0_Template","ProfileComponent_ng_template_1_Template","ÉµÉµtemplateRefExtractor","_r1"],"sources":["C:\\Users\\monta\\OneDrive\\Documents\\Projects\\todo-project-manager\\src\\app\\profile\\profile.component.ts","C:\\Users\\monta\\OneDrive\\Documents\\Projects\\todo-project-manager\\src\\app\\profile\\profile.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UserService, User } from './../services/user.service';\nimport { AuthService } from '././../services/auth.service'; // tu as sÃ»rement dÃ©jÃ  un AuthService\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.css']\n})\nexport class ProfileComponent implements OnInit {\n  currentUser?: User;\n  loading = true;\n  errorMessage = '';\n\n  constructor(\n    private userService: UserService,\n    private authService: AuthService\n  ) {}\n\n  ngOnInit(): void {\n    // âœ… rÃ©cupÃ©rer l'ID ou l'email de lâ€™utilisateur connectÃ© depuis AuthService\n    const userId = this.authService.ge(); \n    // ou bien : const email = this.authService.getUserEmail();\n\n    if (userId) {\n      this.userService.getUserById(userId).subscribe({\n        next: (user) => {\n          this.currentUser = user;\n          this.loading = false;\n        },\n        error: (err) => {\n          console.error(err);\n          this.errorMessage = \"Impossible de charger le profil.\";\n          this.loading = false;\n        }\n      });\n    } else {\n      this.errorMessage = \"Utilisateur non connectÃ©.\";\n      this.loading = false;\n    }\n  }\n}\n","<div class=\"profile-container\" *ngIf=\"!loading && currentUser; else loadingOrError\">\n  <h2>ðŸ‘¤ Mon Profil</h2>\n\n  <div class=\"profile-card\">\n    <p><strong>Nom :</strong> {{ currentUser.nom }}</p>\n    <p><strong>PrÃ©nom :</strong> {{ currentUser.prenom }}</p>\n    <p><strong>Email :</strong> {{ currentUser.email }}</p>\n    <p><strong>RÃ´le :</strong> {{ currentUser.role || 'Utilisateur' }}</p>\n  </div>\n</div>\n\n<ng-template #loadingOrError>\n  <div *ngIf=\"loading\">Chargement du profil...</div>\n  <div *ngIf=\"!loading && errorMessage\" class=\"error-message\">\n    {{ errorMessage }}\n  </div>\n</ng-template>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}