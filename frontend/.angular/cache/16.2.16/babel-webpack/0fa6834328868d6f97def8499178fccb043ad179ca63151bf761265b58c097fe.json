{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../../shared/components/header/header.component\";\nfunction LoginComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nexport class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.email = '';\n    this.password = '';\n    this.errorMessage = '';\n  }\n  login() {\n    this.errorMessage = '';\n    if (!this.email || !this.password) {\n      this.errorMessage = 'Veuillez remplir tous les champs';\n      return;\n    }\n    this.authService.login({\n      email: this.email,\n      password: this.password\n    }).subscribe({\n      next: res => {\n        // récupérer l'utilisateur via l'API\n        this.authService.getUserByEmail(this.email).subscribe({\n          next: user => {\n            this.authService.saveAuthData(res.token, user);\n            const role = user.role?.toLowerCase();\n            if (role === 'admin') this.router.navigate(['/dashboard']);else this.router.navigate(['/dashboard-client']);\n          },\n          error: err => {\n            this.errorMessage = 'Impossible de récupérer les infos utilisateur';\n            console.error(err);\n          }\n        });\n      },\n      error: err => {\n        this.errorMessage = err.error?.message || 'Email ou mot de passe incorrect';\n        console.error(err);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 23,\n      vars: 4,\n      consts: [[1, \"login-container\"], [1, \"login-card\"], [1, \"text-center\"], [\"class\", \"alert alert-error\", 4, \"ngIf\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"email\"], [\"id\", \"email\", \"type\", \"email\", \"name\", \"email\", \"placeholder\", \"Entrez votre email\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\"], [\"id\", \"password\", \"type\", \"password\", \"name\", \"password\", \"placeholder\", \"Entrez votre mot de passe\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-group\", \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"routerLink\", \"/register\"], [1, \"alert\", \"alert-error\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-header\");\n          i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"h2\", 2);\n          i0.ɵɵtext(4, \"Connexion\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, LoginComponent_div_5_Template, 2, 1, \"div\", 3);\n          i0.ɵɵelementStart(6, \"form\", 4, 5);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_6_listener() {\n            return ctx.login();\n          });\n          i0.ɵɵelementStart(8, \"div\", 6)(9, \"label\", 7);\n          i0.ɵɵtext(10, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"input\", 8);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n            return ctx.email = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\", 9);\n          i0.ɵɵtext(14, \"Mot de passe\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"input\", 10);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_15_listener($event) {\n            return ctx.password = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 11)(17, \"button\", 12);\n          i0.ɵɵtext(18, \" Se connecter \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(19, \"p\", 2);\n          i0.ɵɵtext(20, \" Pas encore de compte ? \");\n          i0.ɵɵelementStart(21, \"a\", 13);\n          i0.ɵɵtext(22, \"S'inscrire\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(7);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.email);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.password);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", _r1.invalid);\n        }\n      },\n      dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i2.RouterLink, i5.HeaderComponent],\n      styles: [\"\\n\\n*[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\n\\n\\n[_nghost-%COMP%] {\\n  display: block;\\n  min-height: 100vh;\\n  background: linear-gradient(135deg, #e6f0fa 0%, #ffffff 100%);\\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n  padding: 20px 0;\\n}\\n\\n\\n\\n.login-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  min-height: calc(100vh - 40px); \\n\\n  width: 100%;\\n  padding: 0 20px;\\n}\\n\\n\\n\\n.login-card[_ngcontent-%COMP%] {\\n  background-color: #ffffff;\\n  padding: 40px;\\n  border-radius: 16px;\\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08), 0 5px 15px rgba(0, 0, 0, 0.05);\\n  width: 100%;\\n  max-width: 420px;\\n  text-align: center;\\n  border: 1px solid rgba(224, 224, 224, 0.3);\\n  -webkit-backdrop-filter: blur(10px);\\n          backdrop-filter: blur(10px);\\n}\\n\\n\\n\\n.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 28px;\\n  font-weight: 600;\\n  color: #1a2b49;\\n  margin-bottom: 30px;\\n  letter-spacing: -0.5px;\\n}\\n\\n\\n\\nform[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n\\n\\n.form-group[_ngcontent-%COMP%] {\\n  margin-bottom: 24px;\\n  text-align: left;\\n  width: 100%;\\n}\\n\\n.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  display: block;\\n  font-size: 14px;\\n  color: #374151;\\n  margin-bottom: 8px;\\n  font-weight: 500;\\n}\\n\\n.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 14px 16px;\\n  border: 2px solid #e5e7eb;\\n  border-radius: 8px;\\n  font-size: 16px;\\n  background: #ffffff;\\n  transition: all 0.3s ease;\\n  outline: none;\\n  display: block;\\n}\\n\\n.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus {\\n  border-color: #2c6bed;\\n  box-shadow: 0 0 0 3px rgba(44, 107, 237, 0.1);\\n  background: #ffffff;\\n}\\n\\n.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder {\\n  color: #9ca3af;\\n}\\n\\n\\n\\n.btn[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 14px 20px;\\n  border: none;\\n  border-radius: 8px;\\n  font-size: 16px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  outline: none;\\n  display: block;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #2c6bed 0%, #1a50c3 100%);\\n  color: #ffffff;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  background: linear-gradient(135deg, #1a50c3 0%, #164494 100%);\\n  transform: translateY(-2px);\\n  box-shadow: 0 8px 25px rgba(44, 107, 237, 0.3);\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]:active:not(:disabled) {\\n  transform: translateY(0);\\n  box-shadow: 0 4px 15px rgba(44, 107, 237, 0.2);\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]:disabled {\\n  background: #9ca3af;\\n  cursor: not-allowed;\\n  transform: none;\\n  box-shadow: none;\\n}\\n\\n\\n\\n.text-center[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n\\n\\n.login-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin-top: 24px;\\n  font-size: 14px;\\n  color: #6b7280;\\n}\\n\\n.login-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  color: #2c6bed;\\n  text-decoration: none;\\n  font-weight: 600;\\n  transition: color 0.3s ease;\\n}\\n\\n.login-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  color: #1a50c3;\\n  text-decoration: underline;\\n}\\n\\n\\n\\n.alert[_ngcontent-%COMP%] {\\n  padding: 14px 16px;\\n  border-radius: 8px;\\n  margin-bottom: 24px;\\n  font-size: 14px;\\n  text-align: left;\\n}\\n\\n.alert-error[_ngcontent-%COMP%] {\\n  background-color: #fef2f2;\\n  color: #dc2626;\\n  border: 1px solid #fecaca;\\n}\\n\\n\\n\\n@media (max-width: 768px) {\\n  .login-container[_ngcontent-%COMP%] {\\n    padding: 15px;\\n  }\\n  \\n  .login-card[_ngcontent-%COMP%] {\\n    padding: 35px 25px;\\n    max-width: 100%;\\n  }\\n}\\n\\n@media (max-width: 480px) {\\n  .login-container[_ngcontent-%COMP%] {\\n    padding: 15px;\\n  }\\n  \\n  .login-card[_ngcontent-%COMP%] {\\n    padding: 30px 20px;\\n    border-radius: 12px;\\n  }\\n  \\n  .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n    font-size: 24px;\\n    margin-bottom: 25px;\\n  }\\n  \\n  .form-group[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n  }\\n  \\n  .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n    padding: 12px 14px;\\n    font-size: 16px; \\n\\n  }\\n  \\n  .btn[_ngcontent-%COMP%] {\\n    padding: 12px 16px;\\n    font-size: 15px;\\n  }\\n}\\n\\n@media (max-width: 360px) {\\n  .login-card[_ngcontent-%COMP%] {\\n    padding: 25px 15px;\\n  }\\n  \\n  .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n    font-size: 22px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvYXV0aC9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtCQUFrQjtBQUNsQjtFQUNFLFNBQVM7RUFDVCxVQUFVO0VBQ1Ysc0JBQXNCO0FBQ3hCOztBQUVBLDBDQUEwQztBQUMxQztFQUNFLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsNkRBQTZEO0VBQzdELDREQUE0RDtFQUM1RCxlQUFlO0FBQ2pCOztBQUVBLHlDQUF5QztBQUN6QztFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0VBQ25CLDhCQUE4QixFQUFFLDJCQUEyQjtFQUMzRCxXQUFXO0VBQ1gsZUFBZTtBQUNqQjs7QUFFQSxzQkFBc0I7QUFDdEI7RUFDRSx5QkFBeUI7RUFDekIsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQiwyRUFBMkU7RUFDM0UsV0FBVztFQUNYLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsMENBQTBDO0VBQzFDLG1DQUEyQjtVQUEzQiwyQkFBMkI7QUFDN0I7O0FBRUEsVUFBVTtBQUNWO0VBQ0UsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2QsbUJBQW1CO0VBQ25CLHNCQUFzQjtBQUN4Qjs7QUFFQSxpQkFBaUI7QUFDakI7RUFDRSxXQUFXO0FBQ2I7O0FBRUEsZ0JBQWdCO0FBQ2hCO0VBQ0UsbUJBQW1CO0VBQ25CLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsZUFBZTtFQUNmLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQix5QkFBeUI7RUFDekIsa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixtQkFBbUI7RUFDbkIseUJBQXlCO0VBQ3pCLGFBQWE7RUFDYixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLDZDQUE2QztFQUM3QyxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBLG1CQUFtQjtBQUNuQjtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZix5QkFBeUI7RUFDekIsYUFBYTtFQUNiLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSw2REFBNkQ7RUFDN0QsY0FBYztBQUNoQjs7QUFFQTtFQUNFLDZEQUE2RDtFQUM3RCwyQkFBMkI7RUFDM0IsOENBQThDO0FBQ2hEOztBQUVBO0VBQ0Usd0JBQXdCO0VBQ3hCLDhDQUE4QztBQUNoRDs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLGdCQUFnQjtBQUNsQjs7QUFFQSxzQkFBc0I7QUFDdEI7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUEsVUFBVTtBQUNWO0VBQ0UsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsY0FBYztFQUNkLHFCQUFxQjtFQUNyQixnQkFBZ0I7RUFDaEIsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsY0FBYztFQUNkLDBCQUEwQjtBQUM1Qjs7QUFFQSxtQkFBbUI7QUFDbkI7RUFDRSxrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixlQUFlO0VBQ2YsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGNBQWM7RUFDZCx5QkFBeUI7QUFDM0I7O0FBRUEsc0JBQXNCO0FBQ3RCO0VBQ0U7SUFDRSxhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIsZUFBZTtFQUNqQjtBQUNGOztBQUVBO0VBQ0U7SUFDRSxhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsZUFBZTtJQUNmLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQixlQUFlLEVBQUUsMEJBQTBCO0VBQzdDOztFQUVBO0lBQ0Usa0JBQWtCO0lBQ2xCLGVBQWU7RUFDakI7QUFDRjs7QUFFQTtFQUNFO0lBQ0Usa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsZUFBZTtFQUNqQjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyogUmVzZXQgZXQgYmFzZSAqL1xyXG4qIHtcclxuICBtYXJnaW46IDA7XHJcbiAgcGFkZGluZzogMDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG4vKiBQYWdlIGJhY2tncm91bmQgZXQgY2VudHJhZ2UgcHJpbmNpcGFsICovXHJcbjpob3N0IHtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBtaW4taGVpZ2h0OiAxMDB2aDtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZTZmMGZhIDAlLCAjZmZmZmZmIDEwMCUpO1xyXG4gIGZvbnQtZmFtaWx5OiAnU2Vnb2UgVUknLCBUYWhvbWEsIEdlbmV2YSwgVmVyZGFuYSwgc2Fucy1zZXJpZjtcclxuICBwYWRkaW5nOiAyMHB4IDA7XHJcbn1cclxuXHJcbi8qIENvbnRhaW5lciBwcmluY2lwYWwgcG91ciBsZSBjZW50cmFnZSAqL1xyXG4ubG9naW4tY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIDQwcHgpOyAvKiBBanVzdGUgcG91ciBsZSBwYWRkaW5nICovXHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogMCAyMHB4O1xyXG59XHJcblxyXG4vKiBDYXJkIGRlIGNvbm5leGlvbiAqL1xyXG4ubG9naW4tY2FyZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICBwYWRkaW5nOiA0MHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE2cHg7XHJcbiAgYm94LXNoYWRvdzogMCAxNXB4IDM1cHggcmdiYSgwLCAwLCAwLCAwLjA4KSwgMCA1cHggMTVweCByZ2JhKDAsIDAsIDAsIDAuMDUpO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1heC13aWR0aDogNDIwcHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjI0LCAyMjQsIDIyNCwgMC4zKTtcclxuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7XHJcbn1cclxuXHJcbi8qIFRpdGxlICovXHJcbi5sb2dpbi1jYXJkIGgyIHtcclxuICBmb250LXNpemU6IDI4cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICBjb2xvcjogIzFhMmI0OTtcclxuICBtYXJnaW4tYm90dG9tOiAzMHB4O1xyXG4gIGxldHRlci1zcGFjaW5nOiAtMC41cHg7XHJcbn1cclxuXHJcbi8qIEZvcm0gc3R5bGluZyAqL1xyXG5mb3JtIHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLyogRm9ybSBncm91cHMgKi9cclxuLmZvcm0tZ3JvdXAge1xyXG4gIG1hcmdpbi1ib3R0b206IDI0cHg7XHJcbiAgdGV4dC1hbGlnbjogbGVmdDtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmZvcm0tZ3JvdXAgbGFiZWwge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBjb2xvcjogIzM3NDE1MTtcclxuICBtYXJnaW4tYm90dG9tOiA4cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG5cclxuLmZvcm0tZ3JvdXAgaW5wdXQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDE0cHggMTZweDtcclxuICBib3JkZXI6IDJweCBzb2xpZCAjZTVlN2ViO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgYmFja2dyb3VuZDogI2ZmZmZmZjtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuXHJcbi5mb3JtLWdyb3VwIGlucHV0OmZvY3VzIHtcclxuICBib3JkZXItY29sb3I6ICMyYzZiZWQ7XHJcbiAgYm94LXNoYWRvdzogMCAwIDAgM3B4IHJnYmEoNDQsIDEwNywgMjM3LCAwLjEpO1xyXG4gIGJhY2tncm91bmQ6ICNmZmZmZmY7XHJcbn1cclxuXHJcbi5mb3JtLWdyb3VwIGlucHV0OjpwbGFjZWhvbGRlciB7XHJcbiAgY29sb3I6ICM5Y2EzYWY7XHJcbn1cclxuXHJcbi8qIEJ1dHRvbiBzdHlsaW5nICovXHJcbi5idG4ge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDE0cHggMjBweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuXHJcbi5idG4tcHJpbWFyeSB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzJjNmJlZCAwJSwgIzFhNTBjMyAxMDAlKTtcclxuICBjb2xvcjogI2ZmZmZmZjtcclxufVxyXG5cclxuLmJ0bi1wcmltYXJ5OmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWE1MGMzIDAlLCAjMTY0NDk0IDEwMCUpO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcclxuICBib3gtc2hhZG93OiAwIDhweCAyNXB4IHJnYmEoNDQsIDEwNywgMjM3LCAwLjMpO1xyXG59XHJcblxyXG4uYnRuLXByaW1hcnk6YWN0aXZlOm5vdCg6ZGlzYWJsZWQpIHtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDQ0LCAxMDcsIDIzNywgMC4yKTtcclxufVxyXG5cclxuLmJ0bi1wcmltYXJ5OmRpc2FibGVkIHtcclxuICBiYWNrZ3JvdW5kOiAjOWNhM2FmO1xyXG4gIGN1cnNvcjogbm90LWFsbG93ZWQ7XHJcbiAgdHJhbnNmb3JtOiBub25lO1xyXG4gIGJveC1zaGFkb3c6IG5vbmU7XHJcbn1cclxuXHJcbi8qIFRleHQgY2VudGVyIGNsYXNzICovXHJcbi50ZXh0LWNlbnRlciB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4vKiBMaW5rcyAqL1xyXG4ubG9naW4tY2FyZCBwIHtcclxuICBtYXJnaW4tdG9wOiAyNHB4O1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBjb2xvcjogIzZiNzI4MDtcclxufVxyXG5cclxuLmxvZ2luLWNhcmQgYSB7XHJcbiAgY29sb3I6ICMyYzZiZWQ7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgdHJhbnNpdGlvbjogY29sb3IgMC4zcyBlYXNlO1xyXG59XHJcblxyXG4ubG9naW4tY2FyZCBhOmhvdmVyIHtcclxuICBjb2xvcjogIzFhNTBjMztcclxuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxufVxyXG5cclxuLyogQWxlcnQgbWVzc2FnZXMgKi9cclxuLmFsZXJ0IHtcclxuICBwYWRkaW5nOiAxNHB4IDE2cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDI0cHg7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIHRleHQtYWxpZ246IGxlZnQ7XHJcbn1cclxuXHJcbi5hbGVydC1lcnJvciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZlZjJmMjtcclxuICBjb2xvcjogI2RjMjYyNjtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjZmVjYWNhO1xyXG59XHJcblxyXG4vKiBSZXNwb25zaXZlIGRlc2lnbiAqL1xyXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAubG9naW4tY29udGFpbmVyIHtcclxuICAgIHBhZGRpbmc6IDE1cHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5sb2dpbi1jYXJkIHtcclxuICAgIHBhZGRpbmc6IDM1cHggMjVweDtcclxuICAgIG1heC13aWR0aDogMTAwJTtcclxuICB9XHJcbn1cclxuXHJcbkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xyXG4gIC5sb2dpbi1jb250YWluZXIge1xyXG4gICAgcGFkZGluZzogMTVweDtcclxuICB9XHJcbiAgXHJcbiAgLmxvZ2luLWNhcmQge1xyXG4gICAgcGFkZGluZzogMzBweCAyMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICB9XHJcbiAgXHJcbiAgLmxvZ2luLWNhcmQgaDIge1xyXG4gICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjVweDtcclxuICB9XHJcbiAgXHJcbiAgLmZvcm0tZ3JvdXAge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICB9XHJcbiAgXHJcbiAgLmZvcm0tZ3JvdXAgaW5wdXQge1xyXG4gICAgcGFkZGluZzogMTJweCAxNHB4O1xyXG4gICAgZm9udC1zaXplOiAxNnB4OyAvKiDDg8KJdml0ZSBsZSB6b29tIHN1ciBpT1MgKi9cclxuICB9XHJcbiAgXHJcbiAgLmJ0biB7XHJcbiAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XHJcbiAgICBmb250LXNpemU6IDE1cHg7XHJcbiAgfVxyXG59XHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDogMzYwcHgpIHtcclxuICAubG9naW4tY2FyZCB7XHJcbiAgICBwYWRkaW5nOiAyNXB4IDE1cHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5sb2dpbi1jYXJkIGgyIHtcclxuICAgIGZvbnQtc2l6ZTogMjJweDtcclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","errorMessage","LoginComponent","constructor","authService","router","email","password","login","subscribe","next","res","getUserByEmail","user","saveAuthData","token","role","toLowerCase","navigate","error","err","console","message","ɵɵdirectiveInject","i1","AuthService","i2","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelement","ɵɵtemplate","LoginComponent_div_5_Template","ɵɵlistener","LoginComponent_Template_form_ngSubmit_6_listener","LoginComponent_Template_input_ngModelChange_11_listener","$event","LoginComponent_Template_input_ngModelChange_15_listener","ɵɵproperty","_r1","invalid"],"sources":["C:\\Users\\monta\\OneDrive\\Documents\\Projects\\todo-project-manager\\src\\app\\features\\auth\\login\\login.component.ts","C:\\Users\\monta\\OneDrive\\Documents\\Projects\\todo-project-manager\\src\\app\\features\\auth\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../../services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n  email: string = '';\n  password: string = '';\n  errorMessage: string = '';\n\n  constructor(private authService: AuthService, private router: Router) {}\n\n  login() {\n    this.errorMessage = '';\n\n    if (!this.email || !this.password) {\n      this.errorMessage = 'Veuillez remplir tous les champs';\n      return;\n    }\n\n    this.authService.login({ email: this.email, password: this.password })\n      .subscribe({\n        next: res => {\n          // récupérer l'utilisateur via l'API\n          this.authService.getUserByEmail(this.email).subscribe({\n            next: user => {\n              this.authService.saveAuthData(res.token, user);\n\n              const role = user.role?.toLowerCase();\n              if (role === 'admin') this.router.navigate(['/dashboard']);\n              else this.router.navigate(['/dashboard-client']);\n            },\n            error: err => {\n              this.errorMessage = 'Impossible de récupérer les infos utilisateur';\n              console.error(err);\n            }\n          });\n        },\n        error: err => {\n          this.errorMessage = err.error?.message || 'Email ou mot de passe incorrect';\n          console.error(err);\n        }\n      });\n  }\n}\n","<app-header></app-header>\n<div class=\"login-container\">\n  <div class=\"login-card\">\n    <h2 class=\"text-center\">Connexion</h2>\n\n    <!-- Message d'erreur -->\n    <div *ngIf=\"errorMessage\" class=\"alert alert-error\">\n      {{ errorMessage }}\n    </div>\n\n    <!-- Formulaire de connexion -->\n    <form (ngSubmit)=\"login()\" #loginForm=\"ngForm\" novalidate>\n      \n      <!-- Champ email -->\n      <div class=\"form-group\">\n        <label for=\"email\">Email</label>\n        <input\n          id=\"email\"\n          type=\"email\"\n          [(ngModel)]=\"email\"\n          name=\"email\"\n          placeholder=\"Entrez votre email\"\n          required\n          class=\"form-control\"\n        />\n      </div>\n\n      <!-- Champ mot de passe -->\n      <div class=\"form-group\">\n        <label for=\"password\">Mot de passe</label>\n        <input\n          id=\"password\"\n          type=\"password\"\n          [(ngModel)]=\"password\"\n          name=\"password\"\n          placeholder=\"Entrez votre mot de passe\"\n          required\n          class=\"form-control\"\n        />\n      </div>\n\n      <!-- Bouton de connexion -->\n      <div class=\"form-group text-center\">\n        <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"loginForm.invalid\">\n          Se connecter\n        </button>\n      </div>\n    </form>\n\n    <!-- Lien vers l'inscription -->\n    <p class=\"text-center\">\n      Pas encore de compte ? \n      <a routerLink=\"/register\">S'inscrire</a>\n    </p>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}