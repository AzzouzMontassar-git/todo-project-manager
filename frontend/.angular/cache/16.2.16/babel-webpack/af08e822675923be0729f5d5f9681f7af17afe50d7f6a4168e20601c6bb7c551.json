{"ast":null,"code":"import { Subject, forkJoin } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/dashboard.service\";\nimport * as i2 from \"../../../services/user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../../shared/components/header-user/header-user.component\";\nconst _c0 = [\"userSearchInput\"];\nfunction DashboardComponent_form_4_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"Project title is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_form_4_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"Description is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_form_4_ul_13_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 22);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_form_4_ul_13_li_1_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const user_r12 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r13.selectUser(user_r12));\n    })(\"keydown.enter\", function DashboardComponent_form_4_ul_13_li_1_Template_li_keydown_enter_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const user_r12 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r15.selectUser(user_r12));\n    });\n    i0.ɵɵelementStart(1, \"span\", 23);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"uppercase\");\n    i0.ɵɵpipe(4, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 24)(6, \"span\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"span\", 26);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(3, 5, user_r12.nom[0]), \"\", i0.ɵɵpipeBind1(4, 7, user_r12.prenom[0]), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", user_r12.nom, \" \", user_r12.prenom, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r12.email);\n  }\n}\nfunction DashboardComponent_form_4_ul_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 20);\n    i0.ɵɵtemplate(1, DashboardComponent_form_4_ul_13_li_1_Template, 10, 9, \"li\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.filteredUsers)(\"ngForTrackBy\", ctx_r7.trackByUserId);\n  }\n}\nfunction DashboardComponent_form_4_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \" No user found with this input. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_form_4_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1, \" \\u2705 Assigned user: \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r9.assignedUser == null ? null : ctx_r9.assignedUser.nom, \" \", ctx_r9.assignedUser == null ? null : ctx_r9.assignedUser.prenom, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r9.assignedUser == null ? null : ctx_r9.assignedUser.email, \") \");\n  }\n}\nfunction DashboardComponent_form_4_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" Please fix the errors above \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 6);\n    i0.ɵɵlistener(\"ngSubmit\", function DashboardComponent_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.addProject());\n    });\n    i0.ɵɵelementStart(1, \"div\", 7)(2, \"h3\");\n    i0.ɵɵtext(3, \"Create a new project\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 8)(5, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_form_4_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.newProjectTitle = $event);\n    })(\"blur\", function DashboardComponent_form_4_Template_input_blur_5_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.validateForm());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, DashboardComponent_form_4_div_6_Template, 2, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"textarea\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_form_4_Template_textarea_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.newProjectDescription = $event);\n    })(\"blur\", function DashboardComponent_form_4_Template_textarea_blur_8_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.validateForm());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, DashboardComponent_form_4_div_9_Template, 2, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 12)(11, \"input\", 13, 14);\n    i0.ɵɵlistener(\"input\", function DashboardComponent_form_4_Template_input_input_11_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.onUserSearchInput($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, DashboardComponent_form_4_ul_13_Template, 2, 2, \"ul\", 15);\n    i0.ɵɵtemplate(14, DashboardComponent_form_4_div_14_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(15, DashboardComponent_form_4_div_15_Template, 5, 3, \"div\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 17);\n    i0.ɵɵtext(17, \" Create project \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, DashboardComponent_form_4_div_18_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassProp(\"error\", ctx_r0.newProjectTitleError);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newProjectTitle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.newProjectTitleError);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"error\", ctx_r0.newProjectDescriptionError);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newProjectDescription);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.newProjectDescriptionError);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"has-suggestions\", ctx_r0.showUserSuggestions);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.userSearchTerm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showUserSuggestions);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.userSearchTerm && !ctx_r0.assignedUserId && !ctx_r0.showUserSuggestions);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.assignedUserId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"disabled\", !ctx_r0.isFormValid());\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.isFormValid());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.hasFormErrors);\n  }\n}\nfunction DashboardComponent_h3_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r1.currentUser.role === \"admin\" ? \"All projects\" : \"My projects\", \" (\", ctx_r1.visibleProjects.length, \") \");\n  }\n}\nfunction DashboardComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.currentUser.role === \"admin\" ? \"No project created.\" : \"No project assigned.\");\n  }\n}\nfunction DashboardComponent_div_8_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_8_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const project_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.removeProject(project_r23));\n    });\n    i0.ɵɵtext(1, \" \\u2715 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_8_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 42)(1, \"strong\");\n    i0.ɵɵtext(2, \"Assigned to:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const project_r23 = i0.ɵɵnextContext().$implicit;\n    const ctx_r25 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r25.getAssignedUserNames(project_r23), \" \");\n  }\n}\nfunction DashboardComponent_div_8_ul_13_li_1_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_8_ul_13_li_1_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const task_r34 = i0.ɵɵnextContext().$implicit;\n      const project_r23 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r36 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r36.removeTask(project_r23, task_r34));\n    });\n    i0.ɵɵtext(1, \" \\u2715 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_8_ul_13_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 45)(1, \"div\", 46)(2, \"input\", 47);\n    i0.ɵɵlistener(\"change\", function DashboardComponent_div_8_ul_13_li_1_Template_input_change_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const task_r34 = restoredCtx.$implicit;\n      const project_r23 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r40 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r40.toggleTask(task_r34, project_r23));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 48);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, DashboardComponent_div_8_ul_13_li_1_button_5_Template, 2, 0, \"button\", 49);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r34 = ctx.$implicit;\n    const ctx_r33 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", task_r34.done);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"completed\", task_r34.done);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", task_r34.title, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r33.currentUser.role === \"admin\");\n  }\n}\nfunction DashboardComponent_div_8_ul_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 43);\n    i0.ɵɵtemplate(1, DashboardComponent_div_8_ul_13_li_1_Template, 6, 5, \"li\", 44);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const project_r23 = i0.ɵɵnextContext().$implicit;\n    const ctx_r27 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", project_r23.tasks)(\"ngForTrackBy\", ctx_r27.trackByTaskId);\n  }\n}\nfunction DashboardComponent_div_8_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵtext(1, \" No tasks for this project \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r45 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31)(2, \"h4\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, DashboardComponent_div_8_button_4_Template, 2, 0, \"button\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 33);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, DashboardComponent_div_8_p_7_Template, 4, 1, \"p\", 34);\n    i0.ɵɵelementStart(8, \"div\", 35)(9, \"input\", 36, 37);\n    i0.ɵɵlistener(\"keypress\", function DashboardComponent_div_8_Template_input_keypress_9_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r45);\n      const project_r23 = restoredCtx.$implicit;\n      const _r26 = i0.ɵɵreference(10);\n      const ctx_r44 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r44.onTaskInputKeyPress($event, project_r23, _r26));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_8_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r45);\n      const project_r23 = restoredCtx.$implicit;\n      const _r26 = i0.ɵɵreference(10);\n      const ctx_r46 = i0.ɵɵnextContext();\n      ctx_r46.addTask(project_r23, _r26.value);\n      return i0.ɵɵresetView(_r26.value = \"\");\n    });\n    i0.ɵɵtext(12, \" Add \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(13, DashboardComponent_div_8_ul_13_Template, 2, 2, \"ul\", 39);\n    i0.ɵɵtemplate(14, DashboardComponent_div_8_div_14_Template, 2, 0, \"div\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const project_r23 = ctx.$implicit;\n    const _r26 = i0.ɵɵreference(10);\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(project_r23.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.currentUser.role === \"admin\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(project_r23.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.currentUser.role === \"admin\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", !(_r26.value == null ? null : _r26.value.trim()));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", project_r23.tasks && project_r23.tasks.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !project_r23.tasks || project_r23.tasks.length === 0);\n  }\n}\nexport class DashboardComponent {\n  constructor(dashboardService, userService, cd) {\n    this.dashboardService = dashboardService;\n    this.userService = userService;\n    this.cd = cd;\n    this.currentUser = {\n      id: 1,\n      nom: 'Admin',\n      prenom: 'Admin',\n      email: 'admin@example.com',\n      role: 'admin'\n    };\n    this.users = [];\n    this.projects = [];\n    this.newProjectTitle = '';\n    this.newProjectDescription = '';\n    this.assignedUserId = null;\n    this.assignedUser = null;\n    this.newProjectTitleError = false;\n    this.newProjectDescriptionError = false;\n    this.userSearchTerm = '';\n    this.filteredUsers = [];\n    this.showUserSuggestions = false;\n    this.searchTerm$ = new Subject();\n  }\n  ngOnInit() {\n    this.loadUsers();\n    this.searchTerm$.pipe(debounceTime(300), distinctUntilChanged()).subscribe(term => this.onUserSearchTerm(term));\n  }\n  loadUsers() {\n    this.userService.getAllUsers().subscribe({\n      next: users => {\n        this.users = users.filter(u => u.role !== 'admin');\n        this.loadProjects();\n      },\n      error: error => {\n        console.error('Erreur lors du chargement des utilisateurs:', error);\n      }\n    });\n  }\n  loadProjects() {\n    if (this.currentUser.role === 'admin') {\n      this.dashboardService.getAllProjects().subscribe({\n        next: projects => {\n          this.projects = projects || [];\n          this.loadTasksForAllProjects();\n        },\n        error: error => {\n          this.projects = [];\n          this.cd.detectChanges();\n        }\n      });\n    } else {\n      this.dashboardService.getProjectsByUser(this.currentUser.email).subscribe({\n        next: projects => {\n          this.projects = projects || [];\n          this.loadTasksForAllProjects();\n        },\n        error: error => {\n          this.projects = [];\n          this.cd.detectChanges();\n        }\n      });\n    }\n  }\n  loadTasksForAllProjects() {\n    const taskObservables = this.projects.map(project => this.dashboardService.getProjectTasks(project.id || 0));\n    if (taskObservables.length > 0) {\n      forkJoin(taskObservables).subscribe({\n        next: tasksArrays => {\n          tasksArrays.forEach((tasks, index) => {\n            this.projects[index].tasks = tasks;\n          });\n          this.cd.detectChanges();\n        },\n        error: error => {\n          this.cd.detectChanges();\n        }\n      });\n    } else {\n      this.cd.detectChanges();\n    }\n  }\n  isFormValid() {\n    return !!this.newProjectTitle.trim() && !!this.newProjectDescription.trim() && this.assignedUserId !== null;\n  }\n  validateForm() {\n    this.newProjectTitleError = !this.newProjectTitle.trim();\n    this.newProjectDescriptionError = !this.newProjectDescription.trim();\n  }\n  addProject() {\n    this.validateForm();\n    if (this.currentUser.role !== 'admin' || !this.isFormValid()) return;\n    const project = {\n      title: this.newProjectTitle.trim(),\n      description: this.newProjectDescription.trim(),\n      assignedTo: this.assignedUserId ? [this.assignedUserId] : [],\n      tasks: []\n    };\n    const user = this.users.find(u => u.id === this.assignedUserId);\n    if (user) {\n      this.dashboardService.createProject(user.email, project).subscribe({\n        next: savedProject => {\n          this.projects.push(savedProject);\n          this.cd.detectChanges();\n          this.resetForm();\n        },\n        error: error => {\n          console.error('Erreur lors de la création du projet:', error);\n        }\n      });\n    }\n  }\n  resetForm() {\n    this.newProjectTitle = '';\n    this.newProjectDescription = '';\n    this.assignedUserId = null;\n    this.assignedUser = null;\n    this.userSearchTerm = '';\n    this.newProjectTitleError = false;\n    this.newProjectDescriptionError = false;\n  }\n  onUserSearchInput(event) {\n    const term = event.target.value || '';\n    this.userSearchTerm = term;\n    if (term.length > 0) {\n      this.filteredUsers = this.users.filter(u => u.nom.toLowerCase().includes(term.toLowerCase()) || u.prenom.toLowerCase().includes(term.toLowerCase()) || u.email.toLowerCase().includes(term.toLowerCase()));\n      this.showUserSuggestions = this.filteredUsers.length > 0;\n    } else {\n      this.filteredUsers = [];\n      this.showUserSuggestions = false;\n    }\n    // Reset selection if input changes\n    this.assignedUserId = null;\n    this.assignedUser = null;\n  }\n  selectUser(user) {\n    this.assignedUserId = user.id ?? null;\n    this.assignedUser = user;\n    this.userSearchTerm = `${user.nom} ${user.prenom} (${user.email})`;\n    this.showUserSuggestions = false;\n    this.filteredUsers = [];\n  }\n  onUserSearchTerm(term) {\n    // Recherche directe d'un utilisateur par email ou nom complet\n    const found = this.users.find(u => u.email.toLowerCase() === term.toLowerCase() || `${u.nom} ${u.prenom}`.toLowerCase() === term.toLowerCase());\n    if (found && typeof found.id === 'number') {\n      this.assignedUserId = found.id;\n      this.assignedUser = found;\n    } else {\n      this.assignedUserId = null;\n      this.assignedUser = null;\n    }\n  }\n  addTask(project, taskTitle) {\n    if (!taskTitle || !taskTitle.trim()) return;\n    const task = {\n      title: taskTitle.trim(),\n      done: false\n    };\n    if (project.id) {\n      this.dashboardService.addTaskToProject(project.id, task).subscribe({\n        next: savedTask => {\n          if (!project.tasks) project.tasks = [];\n          project.tasks.push(savedTask);\n          this.cd.detectChanges();\n        }\n      });\n    }\n  }\n  toggleTask(task, project) {\n    const originalStatus = task.done;\n    task.done = !task.done;\n    if (task.id) {\n      this.dashboardService.toggleTaskStatus(task.id).subscribe({\n        next: updatedTask => {\n          const index = project.tasks.findIndex(t => t.id === task.id);\n          if (index !== -1) {\n            project.tasks[index] = updatedTask;\n          }\n        },\n        error: () => {\n          task.done = originalStatus;\n          this.cd.detectChanges();\n        }\n      });\n    }\n  }\n  removeTask(project, task) {\n    if (task.id) {\n      this.dashboardService.deleteTask(task.id).subscribe({\n        next: () => {\n          project.tasks = project.tasks.filter(t => t.id !== task.id);\n          this.cd.detectChanges();\n        }\n      });\n    }\n  }\n  removeProject(project) {\n    if (!project.id) return;\n    this.dashboardService.deleteProject(project.id).subscribe({\n      next: () => {\n        this.projects = this.projects.filter(p => p.id !== project.id);\n        this.cd.detectChanges();\n      }\n    });\n  }\n  getAssignedUserNames(project) {\n    if (!project.assignedTo || project.assignedTo.length === 0) return 'Non assigné';\n    return project.assignedTo.map(id => {\n      const user = this.users.find(u => u.id === id);\n      return user ? `${user.nom} ${user.prenom} (${user.email})` : '';\n    }).filter(Boolean).join(', ');\n  }\n  get visibleProjects() {\n    if (this.currentUser.role === 'admin') {\n      return this.projects;\n    }\n    return this.projects.filter(p => p.assignedTo && p.assignedTo.includes(this.currentUser.id));\n  }\n  get hasFormErrors() {\n    return this.newProjectTitleError || this.newProjectDescriptionError;\n  }\n  trackByProjectId(index, project) {\n    return project.id || index;\n  }\n  trackByTaskId(index, task) {\n    return task.id || index;\n  }\n  trackByUserId(index, user) {\n    return user.id || index;\n  }\n  onTaskInputKeyPress(event, project, input) {\n    if (event.key === 'Enter' && input.value.trim()) {\n      this.addTask(project, input.value);\n      input.value = '';\n    }\n  }\n  static {\n    this.ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.DashboardService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      viewQuery: function DashboardComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.userSearchInput = _t.first);\n        }\n      },\n      decls: 9,\n      vars: 5,\n      consts: [[1, \"dashboard-container\"], [3, \"ngSubmit\", 4, \"ngIf\"], [1, \"project-list\"], [4, \"ngIf\"], [\"class\", \"no-projects\", 4, \"ngIf\"], [\"class\", \"project-card\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"ngSubmit\"], [1, \"project-form\"], [1, \"form-group\"], [\"placeholder\", \"Project title\", \"name\", \"title\", \"required\", \"\", 1, \"form-input\", 3, \"ngModel\", \"ngModelChange\", \"blur\"], [\"class\", \"field-error\", 4, \"ngIf\"], [\"placeholder\", \"Project description\", \"rows\", \"3\", \"name\", \"description\", \"required\", \"\", 1, \"form-input\", 3, \"ngModel\", \"ngModelChange\", \"blur\"], [1, \"form-group\", \"user-search-group\", 2, \"position\", \"relative\"], [\"type\", \"text\", \"name\", \"userSearch\", \"placeholder\", \"Type email, last name or first name\", \"autocomplete\", \"off\", \"required\", \"\", 1, \"form-input\", \"user-search-input\", 3, \"ngModel\", \"input\"], [\"userSearchInput\", \"\"], [\"class\", \"user-suggestions-list\", 4, \"ngIf\"], [\"class\", \"user-selected\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"field-error\"], [1, \"user-suggestions-list\"], [\"class\", \"user-suggestion-item\", \"tabindex\", \"0\", 3, \"click\", \"keydown.enter\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"tabindex\", \"0\", 1, \"user-suggestion-item\", 3, \"click\", \"keydown.enter\"], [1, \"user-avatar\"], [1, \"user-info\"], [1, \"user-name\"], [1, \"user-email\"], [1, \"user-selected\"], [1, \"error-message\"], [1, \"no-projects\"], [1, \"project-card\"], [1, \"project-header\"], [\"class\", \"btn btn-danger btn-sm\", \"title\", \"Delete project\", 3, \"click\", 4, \"ngIf\"], [1, \"project-description\"], [\"class\", \"assigned-users\", 4, \"ngIf\"], [1, \"task-form\"], [\"placeholder\", \"New task...\", 1, \"task-input\", 3, \"keypress\"], [\"taskInput\", \"\"], [1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"disabled\", \"click\"], [\"class\", \"task-list\", 4, \"ngIf\"], [\"class\", \"no-tasks\", 4, \"ngIf\"], [\"title\", \"Delete project\", 1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [1, \"assigned-users\"], [1, \"task-list\"], [\"class\", \"task-item\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"task-item\"], [1, \"task-content\"], [\"type\", \"checkbox\", 1, \"task-checkbox\", 3, \"checked\", \"change\"], [1, \"task-title\"], [\"class\", \"btn btn-danger btn-xs\", \"title\", \"Delete task\", 3, \"click\", 4, \"ngIf\"], [\"title\", \"Delete task\", 1, \"btn\", \"btn-danger\", \"btn-xs\", 3, \"click\"], [1, \"no-tasks\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-header-user\");\n          i0.ɵɵelementStart(1, \"div\", 0)(2, \"h2\");\n          i0.ɵɵtext(3, \"Dashboard\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, DashboardComponent_form_4_Template, 19, 18, \"form\", 1);\n          i0.ɵɵelementStart(5, \"div\", 2);\n          i0.ɵɵtemplate(6, DashboardComponent_h3_6_Template, 2, 2, \"h3\", 3);\n          i0.ɵɵtemplate(7, DashboardComponent_div_7_Template, 3, 1, \"div\", 4);\n          i0.ɵɵtemplate(8, DashboardComponent_div_8_Template, 15, 7, \"div\", 5);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.currentUser.role === \"admin\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.projects.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.visibleProjects.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.visibleProjects)(\"ngForTrackBy\", ctx.trackByProjectId);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i5.HeaderUserComponent, i3.UpperCasePipe],\n      styles: [\".dashboard-container[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  max-width: 1200px;\\n  margin: 0 auto;\\n}\\n\\n.project-form[_ngcontent-%COMP%] {\\n  background: #f8f9fa;\\n  padding: 20px;\\n  border-radius: 8px;\\n  margin-bottom: 30px;\\n  border: 1px solid #e9ecef;\\n}\\n\\n.form-group[_ngcontent-%COMP%] {\\n  margin-bottom: 15px;\\n}\\n\\n.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  font-size: 14px;\\n}\\n\\n.form-input.error[_ngcontent-%COMP%], .form-select.error[_ngcontent-%COMP%] {\\n  border-color: #dc3545;\\n}\\n\\n.field-error[_ngcontent-%COMP%] {\\n  color: #dc3545;\\n  font-size: 12px;\\n  margin-top: 5px;\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n  color: #dc3545;\\n  margin-top: 10px;\\n  font-weight: bold;\\n}\\n\\n.search-input[_ngcontent-%COMP%] {\\n  margin-bottom: 10px;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  padding: 10px 15px;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 14px;\\n  transition: background-color 0.3s;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%] {\\n  background-color: #007bff;\\n  color: white;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]:hover:not(.disabled) {\\n  background-color: #0056b3;\\n}\\n\\n.btn-primary.disabled[_ngcontent-%COMP%] {\\n  background-color: #6c757d;\\n  cursor: not-allowed;\\n}\\n\\n.btn-secondary[_ngcontent-%COMP%] {\\n  background-color: #6c757d;\\n  color: white;\\n}\\n\\n.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  background-color: #545b62;\\n}\\n\\n.btn-danger[_ngcontent-%COMP%] {\\n  background-color: #dc3545;\\n  color: white;\\n}\\n\\n.btn-danger[_ngcontent-%COMP%]:hover {\\n  background-color: #c82333;\\n}\\n\\n.btn-warning[_ngcontent-%COMP%] {\\n  background-color: #ffc107;\\n  color: #212529;\\n}\\n\\n.btn-warning[_ngcontent-%COMP%]:hover {\\n  background-color: #e0a800;\\n}\\n\\n.btn-sm[_ngcontent-%COMP%] {\\n  padding: 5px 10px;\\n  font-size: 12px;\\n}\\n\\n.btn-xs[_ngcontent-%COMP%] {\\n  padding: 3px 6px;\\n  font-size: 11px;\\n}\\n\\n.project-list[_ngcontent-%COMP%] {\\n  margin-top: 20px;\\n}\\n\\n.project-card[_ngcontent-%COMP%] {\\n  background: white;\\n  border: 1px solid #e9ecef;\\n  border-radius: 8px;\\n  padding: 20px;\\n  margin-bottom: 20px;\\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\\n}\\n\\n.project-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 15px;\\n}\\n\\n.project-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\\n  margin: 0;\\n  color: #333;\\n}\\n\\n.project-description[_ngcontent-%COMP%] {\\n  color: #666;\\n  margin-bottom: 15px;\\n}\\n\\n.assigned-users[_ngcontent-%COMP%] {\\n  color: #6c757d;\\n  font-size: 14px;\\n  margin-bottom: 15px;\\n}\\n\\n.task-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 10px;\\n  margin-bottom: 15px;\\n}\\n\\n.task-input[_ngcontent-%COMP%] {\\n  flex: 1;\\n  padding: 8px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n}\\n\\n.task-list[_ngcontent-%COMP%] {\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n}\\n\\n.task-item[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 10px;\\n  border-bottom: 1px solid #f1f1f1;\\n}\\n\\n.task-item[_ngcontent-%COMP%]:last-child {\\n  border-bottom: none;\\n}\\n\\n.task-content[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.task-checkbox[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n\\n.task-title[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n}\\n\\n.task-title.completed[_ngcontent-%COMP%] {\\n  text-decoration: line-through;\\n  color: #6c757d;\\n}\\n\\n.no-projects[_ngcontent-%COMP%], .no-tasks[_ngcontent-%COMP%] {\\n  text-align: center;\\n  color: #6c757d;\\n  padding: 20px;\\n  font-style: italic;\\n}\\n\\n\\n\\n.user-search-group[_ngcontent-%COMP%] {\\n  margin-bottom: 1.5rem;\\n}\\n.user-search-input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px 12px;\\n  border: 1.5px solid #bdbdbd;\\n  border-radius: 6px;\\n  font-size: 1rem;\\n  transition: border 0.2s;\\n}\\n.user-search-input[_ngcontent-%COMP%]:focus {\\n  border-color: #1976d2;\\n  outline: none;\\n}\\n.user-search-input.has-suggestions[_ngcontent-%COMP%] {\\n  border-bottom-left-radius: 0;\\n  border-bottom-right-radius: 0;\\n}\\n\\n\\n\\n.user-suggestions-list[_ngcontent-%COMP%] {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 100%;\\n  z-index: 100;\\n  background: #fff;\\n  border: 1.5px solid #1976d2;\\n  border-top: none;\\n  border-bottom-left-radius: 6px;\\n  border-bottom-right-radius: 6px;\\n  max-height: 220px;\\n  overflow-y: auto;\\n  margin: 0;\\n  padding: 0;\\n  list-style: none;\\n  box-shadow: 0 4px 16px rgba(25, 118, 210, 0.08);\\n}\\n.user-suggestion-item[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  padding: 10px 14px;\\n  cursor: pointer;\\n  transition: background 0.15s;\\n}\\n.user-suggestion-item[_ngcontent-%COMP%]:hover, .user-suggestion-item[_ngcontent-%COMP%]:focus {\\n  background: #e3f2fd;\\n}\\n.user-avatar[_ngcontent-%COMP%] {\\n  background: #1976d2;\\n  color: #fff;\\n  border-radius: 50%;\\n  width: 32px;\\n  height: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-weight: bold;\\n  margin-right: 12px;\\n  font-size: 1.1rem;\\n}\\n.user-info[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n}\\n.user-name[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n  color: #222;\\n}\\n.user-email[_ngcontent-%COMP%] {\\n  font-size: 0.92em;\\n  color: #666;\\n}\\n.user-selected[_ngcontent-%COMP%] {\\n  margin-top: 0.5rem;\\n  color: #388e3c;\\n  font-size: 1.05em;\\n}\\n\\n\\n\\n@media (max-width: 768px) {\\n  .dashboard-container[_ngcontent-%COMP%] {\\n    padding: 10px;\\n  }\\n  \\n  .project-header[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n    align-items: flex-start;\\n    gap: 10px;\\n  }\\n  \\n  .task-form[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n  }\\n  \\n  .btn[_ngcontent-%COMP%] {\\n    width: 100%;\\n    margin-bottom: 5px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvZGFzaGJvYXJkL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYixpQkFBaUI7RUFDakIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQix5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxlQUFlO0VBQ2YsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxnQkFBZ0I7RUFDaEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGVBQWU7RUFDZixpQ0FBaUM7QUFDbkM7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtBQUNkOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtBQUNkOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxTQUFTO0VBQ1QsV0FBVztBQUNiOztBQUVBO0VBQ0UsV0FBVztFQUNYLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxlQUFlO0VBQ2YsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFNBQVM7RUFDVCxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxPQUFPO0VBQ1AsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsVUFBVTtFQUNWLFNBQVM7QUFDWDs7QUFFQTtFQUNFLGFBQWE7RUFDYiw4QkFBOEI7RUFDOUIsbUJBQW1CO0VBQ25CLGFBQWE7RUFDYixnQ0FBZ0M7QUFDbEM7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFNBQVM7QUFDWDs7QUFFQTtFQUNFLFNBQVM7QUFDWDs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSw2QkFBNkI7RUFDN0IsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2QsYUFBYTtFQUNiLGtCQUFrQjtBQUNwQjs7QUFFQSw2QkFBNkI7QUFDN0I7RUFDRSxxQkFBcUI7QUFDdkI7QUFDQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsMkJBQTJCO0VBQzNCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsdUJBQXVCO0FBQ3pCO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsYUFBYTtBQUNmO0FBQ0E7RUFDRSw0QkFBNEI7RUFDNUIsNkJBQTZCO0FBQy9COztBQUVBLGdCQUFnQjtBQUNoQjtFQUNFLGtCQUFrQjtFQUNsQixPQUFPO0VBQ1AsUUFBUTtFQUNSLFNBQVM7RUFDVCxZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLDJCQUEyQjtFQUMzQixnQkFBZ0I7RUFDaEIsOEJBQThCO0VBQzlCLCtCQUErQjtFQUMvQixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLFNBQVM7RUFDVCxVQUFVO0VBQ1YsZ0JBQWdCO0VBQ2hCLCtDQUErQztBQUNqRDtBQUNBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLDRCQUE0QjtBQUM5QjtBQUNBOztFQUVFLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLFdBQVc7QUFDYjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCxpQkFBaUI7QUFDbkI7O0FBRUEsc0JBQXNCO0FBQ3RCO0VBQ0U7SUFDRSxhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxzQkFBc0I7SUFDdEIsdUJBQXVCO0lBQ3ZCLFNBQVM7RUFDWDs7RUFFQTtJQUNFLHNCQUFzQjtFQUN4Qjs7RUFFQTtJQUNFLFdBQVc7SUFDWCxrQkFBa0I7RUFDcEI7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi5kYXNoYm9hcmQtY29udGFpbmVyIHtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIG1heC13aWR0aDogMTIwMHB4O1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG59XHJcblxyXG4ucHJvamVjdC1mb3JtIHtcclxuICBiYWNrZ3JvdW5kOiAjZjhmOWZhO1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2U5ZWNlZjtcclxufVxyXG5cclxuLmZvcm0tZ3JvdXAge1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi5mb3JtLWlucHV0LCAuZm9ybS1zZWxlY3Qge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcblxyXG4uZm9ybS1pbnB1dC5lcnJvciwgLmZvcm0tc2VsZWN0LmVycm9yIHtcclxuICBib3JkZXItY29sb3I6ICNkYzM1NDU7XHJcbn1cclxuXHJcbi5maWVsZC1lcnJvciB7XHJcbiAgY29sb3I6ICNkYzM1NDU7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIG1hcmdpbi10b3A6IDVweDtcclxufVxyXG5cclxuLmVycm9yLW1lc3NhZ2Uge1xyXG4gIGNvbG9yOiAjZGMzNTQ1O1xyXG4gIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi5zZWFyY2gtaW5wdXQge1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuXHJcbi5idG4ge1xyXG4gIHBhZGRpbmc6IDEwcHggMTVweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xyXG59XHJcblxyXG4uYnRuLXByaW1hcnkge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG4uYnRuLXByaW1hcnk6aG92ZXI6bm90KC5kaXNhYmxlZCkge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDU2YjM7XHJcbn1cclxuXHJcbi5idG4tcHJpbWFyeS5kaXNhYmxlZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzZjNzU3ZDtcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG59XHJcblxyXG4uYnRuLXNlY29uZGFyeSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzZjNzU3ZDtcclxuICBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcbi5idG4tc2Vjb25kYXJ5OmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTQ1YjYyO1xyXG59XHJcblxyXG4uYnRuLWRhbmdlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2RjMzU0NTtcclxuICBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcbi5idG4tZGFuZ2VyOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzgyMzMzO1xyXG59XHJcblxyXG4uYnRuLXdhcm5pbmcge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmMxMDc7XHJcbiAgY29sb3I6ICMyMTI1Mjk7XHJcbn1cclxuXHJcbi5idG4td2FybmluZzpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2UwYTgwMDtcclxufVxyXG5cclxuLmJ0bi1zbSB7XHJcbiAgcGFkZGluZzogNXB4IDEwcHg7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG59XHJcblxyXG4uYnRuLXhzIHtcclxuICBwYWRkaW5nOiAzcHggNnB4O1xyXG4gIGZvbnQtc2l6ZTogMTFweDtcclxufVxyXG5cclxuLnByb2plY3QtbGlzdCB7XHJcbiAgbWFyZ2luLXRvcDogMjBweDtcclxufVxyXG5cclxuLnByb2plY3QtY2FyZCB7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2U5ZWNlZjtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7XHJcbn1cclxuXHJcbi5wcm9qZWN0LWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG4ucHJvamVjdC1oZWFkZXIgaDQge1xyXG4gIG1hcmdpbjogMDtcclxuICBjb2xvcjogIzMzMztcclxufVxyXG5cclxuLnByb2plY3QtZGVzY3JpcHRpb24ge1xyXG4gIGNvbG9yOiAjNjY2O1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi5hc3NpZ25lZC11c2VycyB7XHJcbiAgY29sb3I6ICM2Yzc1N2Q7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi50YXNrLWZvcm0ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZ2FwOiAxMHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi50YXNrLWlucHV0IHtcclxuICBmbGV4OiAxO1xyXG4gIHBhZGRpbmc6IDhweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxufVxyXG5cclxuLnRhc2stbGlzdCB7XHJcbiAgbGlzdC1zdHlsZTogbm9uZTtcclxuICBwYWRkaW5nOiAwO1xyXG4gIG1hcmdpbjogMDtcclxufVxyXG5cclxuLnRhc2staXRlbSB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjFmMWYxO1xyXG59XHJcblxyXG4udGFzay1pdGVtOmxhc3QtY2hpbGQge1xyXG4gIGJvcmRlci1ib3R0b206IG5vbmU7XHJcbn1cclxuXHJcbi50YXNrLWNvbnRlbnQge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBnYXA6IDEwcHg7XHJcbn1cclxuXHJcbi50YXNrLWNoZWNrYm94IHtcclxuICBtYXJnaW46IDA7XHJcbn1cclxuXHJcbi50YXNrLXRpdGxlIHtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbn1cclxuXHJcbi50YXNrLXRpdGxlLmNvbXBsZXRlZCB7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XHJcbiAgY29sb3I6ICM2Yzc1N2Q7XHJcbn1cclxuXHJcbi5uby1wcm9qZWN0cywgLm5vLXRhc2tzIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgY29sb3I6ICM2Yzc1N2Q7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbn1cclxuXHJcbi8qIENoYW1wIGRlIHJlY2hlcmNoZSBzdHlsw4PCqSAqL1xyXG4udXNlci1zZWFyY2gtZ3JvdXAge1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxufVxyXG4udXNlci1zZWFyY2gtaW5wdXQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDEwcHggMTJweDtcclxuICBib3JkZXI6IDEuNXB4IHNvbGlkICNiZGJkYmQ7XHJcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gIGZvbnQtc2l6ZTogMXJlbTtcclxuICB0cmFuc2l0aW9uOiBib3JkZXIgMC4ycztcclxufVxyXG4udXNlci1zZWFyY2gtaW5wdXQ6Zm9jdXMge1xyXG4gIGJvcmRlci1jb2xvcjogIzE5NzZkMjtcclxuICBvdXRsaW5lOiBub25lO1xyXG59XHJcbi51c2VyLXNlYXJjaC1pbnB1dC5oYXMtc3VnZ2VzdGlvbnMge1xyXG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7XHJcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XHJcbn1cclxuXHJcbi8qIFN1Z2dlc3Rpb25zICovXHJcbi51c2VyLXN1Z2dlc3Rpb25zLWxpc3Qge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIHRvcDogMTAwJTtcclxuICB6LWluZGV4OiAxMDA7XHJcbiAgYmFja2dyb3VuZDogI2ZmZjtcclxuICBib3JkZXI6IDEuNXB4IHNvbGlkICMxOTc2ZDI7XHJcbiAgYm9yZGVyLXRvcDogbm9uZTtcclxuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA2cHg7XHJcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDZweDtcclxuICBtYXgtaGVpZ2h0OiAyMjBweDtcclxuICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggMTZweCByZ2JhKDI1LCAxMTgsIDIxMCwgMC4wOCk7XHJcbn1cclxuLnVzZXItc3VnZ2VzdGlvbi1pdGVtIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgcGFkZGluZzogMTBweCAxNHB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMTVzO1xyXG59XHJcbi51c2VyLXN1Z2dlc3Rpb24taXRlbTpob3ZlcixcclxuLnVzZXItc3VnZ2VzdGlvbi1pdGVtOmZvY3VzIHtcclxuICBiYWNrZ3JvdW5kOiAjZTNmMmZkO1xyXG59XHJcbi51c2VyLWF2YXRhciB7XHJcbiAgYmFja2dyb3VuZDogIzE5NzZkMjtcclxuICBjb2xvcjogI2ZmZjtcclxuICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgd2lkdGg6IDMycHg7XHJcbiAgaGVpZ2h0OiAzMnB4O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxuICBtYXJnaW4tcmlnaHQ6IDEycHg7XHJcbiAgZm9udC1zaXplOiAxLjFyZW07XHJcbn1cclxuLnVzZXItaW5mbyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG59XHJcbi51c2VyLW5hbWUge1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgY29sb3I6ICMyMjI7XHJcbn1cclxuLnVzZXItZW1haWwge1xyXG4gIGZvbnQtc2l6ZTogMC45MmVtO1xyXG4gIGNvbG9yOiAjNjY2O1xyXG59XHJcbi51c2VyLXNlbGVjdGVkIHtcclxuICBtYXJnaW4tdG9wOiAwLjVyZW07XHJcbiAgY29sb3I6ICMzODhlM2M7XHJcbiAgZm9udC1zaXplOiAxLjA1ZW07XHJcbn1cclxuXHJcbi8qIFJlc3BvbnNpdmUgZGVzaWduICovXHJcbkBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xyXG4gIC5kYXNoYm9hcmQtY29udGFpbmVyIHtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5wcm9qZWN0LWhlYWRlciB7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcbiAgICBnYXA6IDEwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC50YXNrLWZvcm0ge1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICB9XHJcbiAgXHJcbiAgLmJ0biB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Subject","forkJoin","debounceTime","distinctUntilChanged","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","DashboardComponent_form_4_ul_13_li_1_Template_li_click_0_listener","restoredCtx","ɵɵrestoreView","_r14","user_r12","$implicit","ctx_r13","ɵɵnextContext","ɵɵresetView","selectUser","DashboardComponent_form_4_ul_13_li_1_Template_li_keydown_enter_0_listener","ctx_r15","ɵɵadvance","ɵɵtextInterpolate2","ɵɵpipeBind1","nom","prenom","ɵɵtextInterpolate","email","ɵɵtemplate","DashboardComponent_form_4_ul_13_li_1_Template","ɵɵproperty","ctx_r7","filteredUsers","trackByUserId","ctx_r9","assignedUser","ɵɵtextInterpolate1","DashboardComponent_form_4_Template_form_ngSubmit_0_listener","_r17","ctx_r16","addProject","DashboardComponent_form_4_Template_input_ngModelChange_5_listener","$event","ctx_r18","newProjectTitle","DashboardComponent_form_4_Template_input_blur_5_listener","ctx_r19","validateForm","DashboardComponent_form_4_div_6_Template","DashboardComponent_form_4_Template_textarea_ngModelChange_8_listener","ctx_r20","newProjectDescription","DashboardComponent_form_4_Template_textarea_blur_8_listener","ctx_r21","DashboardComponent_form_4_div_9_Template","DashboardComponent_form_4_Template_input_input_11_listener","ctx_r22","onUserSearchInput","DashboardComponent_form_4_ul_13_Template","DashboardComponent_form_4_div_14_Template","DashboardComponent_form_4_div_15_Template","DashboardComponent_form_4_div_18_Template","ɵɵclassProp","ctx_r0","newProjectTitleError","newProjectDescriptionError","showUserSuggestions","userSearchTerm","assignedUserId","isFormValid","hasFormErrors","ctx_r1","currentUser","role","visibleProjects","length","ctx_r2","DashboardComponent_div_8_button_4_Template_button_click_0_listener","_r31","project_r23","ctx_r29","removeProject","ctx_r25","getAssignedUserNames","DashboardComponent_div_8_ul_13_li_1_button_5_Template_button_click_0_listener","_r38","task_r34","ctx_r36","removeTask","DashboardComponent_div_8_ul_13_li_1_Template_input_change_2_listener","_r41","ctx_r40","toggleTask","DashboardComponent_div_8_ul_13_li_1_button_5_Template","done","title","ctx_r33","DashboardComponent_div_8_ul_13_li_1_Template","tasks","ctx_r27","trackByTaskId","DashboardComponent_div_8_button_4_Template","DashboardComponent_div_8_p_7_Template","DashboardComponent_div_8_Template_input_keypress_9_listener","_r45","_r26","ɵɵreference","ctx_r44","onTaskInputKeyPress","DashboardComponent_div_8_Template_button_click_11_listener","ctx_r46","addTask","value","DashboardComponent_div_8_ul_13_Template","DashboardComponent_div_8_div_14_Template","ctx_r3","description","trim","DashboardComponent","constructor","dashboardService","userService","cd","id","users","projects","searchTerm$","ngOnInit","loadUsers","pipe","subscribe","term","onUserSearchTerm","getAllUsers","next","filter","u","loadProjects","error","console","getAllProjects","loadTasksForAllProjects","detectChanges","getProjectsByUser","taskObservables","map","project","getProjectTasks","tasksArrays","forEach","index","assignedTo","user","find","createProject","savedProject","push","resetForm","event","target","toLowerCase","includes","found","taskTitle","task","addTaskToProject","savedTask","originalStatus","toggleTaskStatus","updatedTask","findIndex","t","deleteTask","deleteProject","p","Boolean","join","trackByProjectId","input","key","ɵɵdirectiveInject","i1","DashboardService","i2","UserService","ChangeDetectorRef","selectors","viewQuery","DashboardComponent_Query","rf","ctx","ɵɵelement","DashboardComponent_form_4_Template","DashboardComponent_h3_6_Template","DashboardComponent_div_7_Template","DashboardComponent_div_8_Template"],"sources":["C:\\Users\\monta\\OneDrive\\Documents\\Projects\\todo-project-manager\\src\\app\\features\\dashboard\\dashboard\\dashboard.component.ts","C:\\Users\\monta\\OneDrive\\Documents\\Projects\\todo-project-manager\\src\\app\\features\\dashboard\\dashboard\\dashboard.component.html"],"sourcesContent":["import { Component, OnInit, ChangeDetectorRef, ElementRef, ViewChild } from '@angular/core';\nimport { DashboardService, Project, Task } from '../../../services/dashboard.service';\nimport { UserService, User } from '../../../services/user.service';\nimport { Subject, forkJoin } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})\nexport class DashboardComponent implements OnInit {\n\n  @ViewChild('userSearchInput') userSearchInput!: ElementRef;\n\n  currentUser: User = { id: 1, nom: 'Admin', prenom: 'Admin', email: 'admin@example.com', role: 'admin' };\n\n  users: User[] = [];\n  projects: Project[] = [];\n\n  newProjectTitle = '';\n  newProjectDescription = '';\n  assignedUserId: number | null = null;\n  assignedUser: User | null = null;\n  newProjectTitleError = false;\n  newProjectDescriptionError = false;\n  userSearchTerm = '';\n\n  filteredUsers: User[] = [];\n  showUserSuggestions = false;\n\n  searchTerm$ = new Subject<string>();\n\n  constructor(\n    private dashboardService: DashboardService,\n    private userService: UserService,\n    private cd: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.loadUsers();\n    this.searchTerm$.pipe(\n      debounceTime(300),\n      distinctUntilChanged()\n    ).subscribe(term => this.onUserSearchTerm(term));\n  }\n\n  loadUsers() {\n    this.userService.getAllUsers().subscribe({\n      next: (users) => {\n        this.users = users.filter(u => u.role !== 'admin');\n        this.loadProjects();\n      },\n      error: (error) => {\n        console.error('Erreur lors du chargement des utilisateurs:', error);\n      }\n    });\n  }\n\n  loadProjects() {\n    if (this.currentUser.role === 'admin') {\n      this.dashboardService.getAllProjects().subscribe({\n        next: (projects) => {\n          this.projects = projects || [];\n          this.loadTasksForAllProjects();\n        },\n        error: (error) => {\n          this.projects = [];\n          this.cd.detectChanges();\n        }\n      });\n    } else {\n      this.dashboardService.getProjectsByUser(this.currentUser.email).subscribe({\n        next: (projects) => {\n          this.projects = projects || [];\n          this.loadTasksForAllProjects();\n        },\n        error: (error) => {\n          this.projects = [];\n          this.cd.detectChanges();\n        }\n      });\n    }\n  }\n\n  loadTasksForAllProjects() {\n    const taskObservables = this.projects.map(project => \n      this.dashboardService.getProjectTasks(project.id || 0)\n    );\n\n    if (taskObservables.length > 0) {\n      forkJoin(taskObservables).subscribe({\n        next: (tasksArrays) => {\n          tasksArrays.forEach((tasks, index) => {\n            this.projects[index].tasks = tasks;\n          });\n          this.cd.detectChanges();\n        },\n        error: (error) => {\n          this.cd.detectChanges();\n        }\n      });\n    } else {\n      this.cd.detectChanges();\n    }\n  }\n\n  isFormValid(): boolean {\n    return !!this.newProjectTitle.trim() && \n           !!this.newProjectDescription.trim() && \n           this.assignedUserId !== null;\n  }\n\n  validateForm() {\n    this.newProjectTitleError = !this.newProjectTitle.trim();\n    this.newProjectDescriptionError = !this.newProjectDescription.trim();\n  }\n\n  addProject() {\n    this.validateForm();\n    if (this.currentUser.role !== 'admin' || !this.isFormValid()) return;\n\n    const project: Project = {\n      title: this.newProjectTitle.trim(),\n      description: this.newProjectDescription.trim(),\n      assignedTo: this.assignedUserId ? [this.assignedUserId] : [],\n      tasks: []\n    };\n\n    const user = this.users.find(u => u.id === this.assignedUserId);\n    \n    if (user) {\n      this.dashboardService.createProject(user.email, project).subscribe({\n        next: (savedProject) => {\n          this.projects.push(savedProject);\n          this.cd.detectChanges();\n          this.resetForm();\n        },\n        error: (error) => {\n          console.error('Erreur lors de la création du projet:', error);\n        }\n      });\n    }\n  }\n\n  resetForm() {\n    this.newProjectTitle = '';\n    this.newProjectDescription = '';\n    this.assignedUserId = null;\n    this.assignedUser = null;\n    this.userSearchTerm = '';\n    this.newProjectTitleError = false;\n    this.newProjectDescriptionError = false;\n  }\n\n  onUserSearchInput(event: Event) {\n    const term = (event.target as HTMLInputElement).value || '';\n    this.userSearchTerm = term;\n    if (term.length > 0) {\n      this.filteredUsers = this.users.filter(u =>\n        u.nom.toLowerCase().includes(term.toLowerCase()) ||\n        u.prenom.toLowerCase().includes(term.toLowerCase()) ||\n        u.email.toLowerCase().includes(term.toLowerCase())\n      );\n      this.showUserSuggestions = this.filteredUsers.length > 0;\n    } else {\n      this.filteredUsers = [];\n      this.showUserSuggestions = false;\n    }\n    // Reset selection if input changes\n    this.assignedUserId = null;\n    this.assignedUser = null;\n  }\n\n  selectUser(user: User) {\n    this.assignedUserId = user.id ?? null;\n    this.assignedUser = user;\n    this.userSearchTerm = `${user.nom} ${user.prenom} (${user.email})`;\n    this.showUserSuggestions = false;\n    this.filteredUsers = [];\n  }\n\n  onUserSearchTerm(term: string) {\n    // Recherche directe d'un utilisateur par email ou nom complet\n    const found = this.users.find(u =>\n      u.email.toLowerCase() === term.toLowerCase() ||\n      (`${u.nom} ${u.prenom}`.toLowerCase() === term.toLowerCase())\n    );\n\n    if (found && typeof found.id === 'number') {\n      this.assignedUserId = found.id;\n      this.assignedUser = found;\n    } else {\n      this.assignedUserId = null;\n      this.assignedUser = null;\n    }\n  }\n\n  addTask(project: Project, taskTitle: string) {\n    if (!taskTitle || !taskTitle.trim()) return;\n\n    const task: Task = { \n      title: taskTitle.trim(), \n      done: false\n    };\n\n    if (project.id) {\n      this.dashboardService.addTaskToProject(project.id, task).subscribe({\n        next: (savedTask) => {\n          if (!project.tasks) project.tasks = [];\n          project.tasks.push(savedTask);\n          this.cd.detectChanges();\n        }\n      });\n    }\n  }\n\n  toggleTask(task: Task, project: Project) {\n    const originalStatus = task.done;\n    task.done = !task.done;\n    \n    if (task.id) {\n      this.dashboardService.toggleTaskStatus(task.id).subscribe({\n        next: (updatedTask) => {\n          const index = project.tasks.findIndex(t => t.id === task.id);\n          if (index !== -1) {\n            project.tasks[index] = updatedTask;\n          }\n        },\n        error: () => {\n          task.done = originalStatus;\n          this.cd.detectChanges();\n        }\n      });\n    }\n  }\n\n  removeTask(project: Project, task: Task) {\n    if (task.id) {\n      this.dashboardService.deleteTask(task.id).subscribe({\n        next: () => {\n          project.tasks = project.tasks.filter(t => t.id !== task.id);\n          this.cd.detectChanges();\n        }\n      });\n    }\n  }\n\n  removeProject(project: Project) {\n    if (!project.id) return;\n    \n    this.dashboardService.deleteProject(project.id).subscribe({\n      next: () => {\n        this.projects = this.projects.filter(p => p.id !== project.id);\n        this.cd.detectChanges();\n      }\n    });\n  }\n\n  getAssignedUserNames(project: Project): string {\n    if (!project.assignedTo || project.assignedTo.length === 0) return 'Non assigné';\n    \n    return project.assignedTo\n      .map(id => {\n        const user = this.users.find(u => u.id === id);\n        return user ? `${user.nom} ${user.prenom} (${user.email})` : '';\n      })\n      .filter(Boolean)\n      .join(', ');\n  }\n\n  get visibleProjects(): Project[] {\n    if (this.currentUser.role === 'admin') {\n      return this.projects;\n    }\n    return this.projects.filter(p => p.assignedTo && p.assignedTo.includes(this.currentUser.id!));\n  }\n\n  get hasFormErrors(): boolean {\n    return this.newProjectTitleError || this.newProjectDescriptionError;\n  }\n\n  trackByProjectId(index: number, project: Project): any {\n    return project.id || index;\n  }\n\n  trackByTaskId(index: number, task: Task): any {\n    return task.id || index;\n  }\n\n  trackByUserId(index: number, user: User): any {\n    return user.id || index;\n  }\n\n  onTaskInputKeyPress(event: KeyboardEvent, project: Project, input: HTMLInputElement) {\n    if (event.key === 'Enter' && input.value.trim()) {\n      this.addTask(project, input.value);\n      input.value = '';\n    }\n  }\n}","<app-header-user></app-header-user>\n\n<div class=\"dashboard-container\">\n  <h2>Dashboard</h2>\n\n  <!-- Project creation form (admin) -->\n  <form (ngSubmit)=\"addProject()\" *ngIf=\"currentUser.role === 'admin'\">\n    <div class=\"project-form\">\n      <h3>Create a new project</h3>\n      \n      <div class=\"form-group\">\n        <input \n          [(ngModel)]=\"newProjectTitle\" \n          placeholder=\"Project title\" \n          [class.error]=\"newProjectTitleError\" \n          (blur)=\"validateForm()\" \n          class=\"form-input\"\n          name=\"title\"\n          required\n        />\n        <div *ngIf=\"newProjectTitleError\" class=\"field-error\">Project title is required</div>\n      </div>\n\n      <div class=\"form-group\">\n        <textarea \n          [(ngModel)]=\"newProjectDescription\" \n          placeholder=\"Project description\" \n          [class.error]=\"newProjectDescriptionError\" \n          (blur)=\"validateForm()\"\n          class=\"form-input\"\n          rows=\"3\"\n          name=\"description\"\n          required\n        ></textarea>\n        <div *ngIf=\"newProjectDescriptionError\" class=\"field-error\">Description is required</div>\n      </div>\n\n      <!-- User search field -->\n      <div class=\"form-group user-search-group\" style=\"position:relative;\">\n        <input\n          #userSearchInput\n          type=\"text\"\n          [ngModel]=\"userSearchTerm\"\n          (input)=\"onUserSearchInput($event)\"\n          name=\"userSearch\"\n          placeholder=\"Type email, last name or first name\"\n          autocomplete=\"off\"\n          required\n          class=\"form-input user-search-input\"\n          [class.has-suggestions]=\"showUserSuggestions\"\n        />\n        <!-- Suggestions -->\n        <ul *ngIf=\"showUserSuggestions\" class=\"user-suggestions-list\">\n          <li \n            *ngFor=\"let user of filteredUsers; trackBy: trackByUserId\"\n            (click)=\"selectUser(user)\"\n            class=\"user-suggestion-item\"\n            tabindex=\"0\"\n            (keydown.enter)=\"selectUser(user)\"\n          >\n            <span class=\"user-avatar\">{{ user.nom[0] | uppercase }}{{ user.prenom[0] | uppercase }}</span>\n            <span class=\"user-info\">\n              <span class=\"user-name\">{{ user.nom }} {{ user.prenom }}</span>\n              <span class=\"user-email\">{{ user.email }}</span>\n            </span>\n          </li>\n        </ul>\n        <div *ngIf=\"userSearchTerm && !assignedUserId && !showUserSuggestions\" class=\"field-error\">\n          No user found with this input.\n        </div>\n        <div *ngIf=\"assignedUserId\" class=\"user-selected\">\n          ✅ Assigned user: <strong>{{ assignedUser?.nom }} {{ assignedUser?.prenom }}</strong> ({{ assignedUser?.email }})\n        </div>\n      </div>\n\n      <button \n        type=\"submit\" \n        [disabled]=\"!isFormValid()\" \n        class=\"btn btn-primary\"\n        [class.disabled]=\"!isFormValid()\"\n      >\n        Create project\n      </button>\n\n      <div class=\"error-message\" *ngIf=\"hasFormErrors\">\n        Please fix the errors above\n      </div>\n    </div>\n  </form>\n\n  <!-- Project list -->\n  <div class=\"project-list\">\n    <h3 *ngIf=\"projects.length > 0\">\n      {{ currentUser.role === 'admin' ? 'All projects' : 'My projects' }}\n      ({{ visibleProjects.length }})\n    </h3>\n    \n    <div *ngIf=\"visibleProjects.length === 0\" class=\"no-projects\">\n      <p>{{ currentUser.role === 'admin' ? 'No project created.' : 'No project assigned.' }}</p>\n    </div>\n\n    <div *ngFor=\"let project of visibleProjects; trackBy: trackByProjectId\" class=\"project-card\">\n      <div class=\"project-header\">\n        <h4>{{ project.title }}</h4>\n        <button \n          *ngIf=\"currentUser.role === 'admin'\" \n          (click)=\"removeProject(project)\" \n          class=\"btn btn-danger btn-sm\"\n          title=\"Delete project\"\n        >\n          ✕\n        </button>\n      </div>\n      \n      <p class=\"project-description\">{{ project.description }}</p>\n      \n      <p *ngIf=\"currentUser.role === 'admin'\" class=\"assigned-users\">\n        <strong>Assigned to:</strong> {{ getAssignedUserNames(project) }}\n      </p>\n\n      <!-- Add task form -->\n      <div class=\"task-form\">\n        <input \n          #taskInput \n          placeholder=\"New task...\" \n          class=\"task-input\"\n          (keypress)=\"onTaskInputKeyPress($event, project, taskInput)\"\n        />\n        <button \n          (click)=\"addTask(project, taskInput.value); taskInput.value = ''\" \n          class=\"btn btn-secondary btn-sm\"\n          [disabled]=\"!taskInput.value?.trim()\"\n        >\n          Add\n        </button>\n      </div>\n\n      <!-- Task list -->\n      <ul class=\"task-list\" *ngIf=\"project.tasks && project.tasks.length > 0\">\n        <li *ngFor=\"let task of project.tasks; trackBy: trackByTaskId\" class=\"task-item\">\n          <div class=\"task-content\">\n            <input \n              type=\"checkbox\" \n              [checked]=\"task.done\" \n              (change)=\"toggleTask(task, project)\"\n              class=\"task-checkbox\"\n            />\n            <span \n              [class.completed]=\"task.done\"\n              class=\"task-title\"\n            >\n              {{ task.title }}\n            </span>\n          </div>\n          <button \n            *ngIf=\"currentUser.role === 'admin'\" \n            (click)=\"removeTask(project, task)\" \n            class=\"btn btn-danger btn-xs\"\n            title=\"Delete task\"\n          >\n            ✕\n          </button>\n        </li>\n      </ul>\n\n      <div *ngIf=\"!project.tasks || project.tasks.length === 0\" class=\"no-tasks\">\n        No tasks for this project\n      </div>\n    </div>\n  </div>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}